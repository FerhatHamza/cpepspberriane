<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„Ø§Øª - EPSP Ø¨Ø±ÙŠØ§Ù†</title>
    <!-- Tailwind CSS + Tajawal Font -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * { font-family: 'Tajawal', sans-serif; }
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 2rem;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        .progress-bar {
            height: 1rem;
            border-radius: 1rem;
            background: #e2e8f0;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #48bb78, #38a169);
            transition: width 0.5s ease;
            border-radius: 1rem;
        }
        .deadline-badge {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #78350f;
            padding: 0.75rem 1.5rem;
            border-radius: 3rem;
            font-weight: 700;
            box-shadow: 0 10px 15px -3px rgba(245, 158, 11, 0.3);
        }
        .admin-panel {
            background: linear-gradient(135deg, #1e293b, #0f172a);
            color: white;
        }
        .nin-badge {
            background: #e0f2fe;
            color: #0369a1;
            padding: 0.25rem 0.75rem;
            border-radius: 2rem;
            font-weight: 600;
            font-family: monospace;
            direction: ltr;
            display: inline-block;
        }
        .status-registered {
            background: #c6f6d5;
            color: #22543d;
            padding: 0.25rem 1rem;
            border-radius: 2rem;
            font-weight: 600;
            font-size: 0.875rem;
        }
        .status-pending {
            background: #fed7d7;
            color: #742a2a;
            padding: 0.25rem 1rem;
            border-radius: 2rem;
            font-weight: 600;
            font-size: 0.875rem;
        }
        .btn-admin {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 3rem;
            font-weight: 600;
            transition: all 0.3s;
            border: none;
            cursor: pointer;
        }
        .btn-admin:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 30px -10px rgba(102, 126, 234, 0.5);
        }
        .btn-outline-admin {
            background: transparent;
            border: 2px solid #667eea;
            color: #667eea;
            padding: 0.75rem 2rem;
            border-radius: 3rem;
            font-weight: 600;
            transition: all 0.3s;
            cursor: pointer;
        }
        .btn-outline-admin:hover {
            background: #667eea;
            color: white;
        }
        .search-input {
            border: 2px solid #e2e8f0;
            border-radius: 3rem;
            padding: 1rem 2rem;
            width: 100%;
            font-size: 1.1rem;
            transition: all 0.3s;
            background: white;
        }
        .search-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }
        .floating-action {
            position: fixed;
            bottom: 2rem;
            left: 2rem;
            z-index: 50;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        .modal.active {
            display: flex;
        }
        .modal-content {
            background: white;
            border-radius: 2rem;
            padding: 2rem;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <!-- Floating Admin Button -->
    <div class="floating-action">
        <button onclick="toggleAdminModal()" class="btn-admin shadow-2xl flex items-center gap-2">
            <i class="fas fa-cog"></i>
            <span>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</span>
        </button>
    </div>

    <!-- Admin Modal -->
    <div id="adminModal" class="modal">
        <div class="modal-content" dir="rtl">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-gray-800">ğŸ‘‘ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
                <button onclick="toggleAdminModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
            
            <!-- Admin Login (simple for demo) -->
            <div id="adminLoginSection">
                <div class="mb-4">
                    <label class="block text-gray-700 font-semibold mb-2">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                    <input type="password" id="adminPassword" placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" class="input-field" value="admin123">
                </div>
                <button onclick="adminLogin()" class="btn-admin w-full">Ø¯Ø®ÙˆÙ„</button>
            </div>

            <!-- Admin Panel (hidden until login) -->
            <div id="adminPanelContent" style="display: none;">
                <div class="mb-4">
                    <h3 class="font-bold text-gray-700 mb-2">ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø³Ø±ÙŠØ¹Ø©</h3>
                    <div class="bg-gray-50 p-4 rounded-xl">
                        <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†: <span id="totalEmployeesStat" class="font-bold text-teal-600">0</span></p>
                        <p>Ø§Ù„Ù…Ø³Ø¬Ù„ÙˆÙ†: <span id="registeredStat" class="font-bold text-green-600">0</span></p>
                        <p>ØºÙŠØ± Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†: <span id="pendingStat" class="font-bold text-red-600">0</span></p>
                    </div>
                </div>

                <div class="mb-4">
                    <label class="block text-gray-700 font-semibold mb-2">â• Ø¥Ø¶Ø§ÙØ© Ù…ÙˆØ¸Ù Ø¬Ø¯ÙŠØ¯ (Ù…Ù† Ù…Ù†ØµØ© Ø§Ù„ØªØ³Ø¬ÙŠÙ„)</label>
                    <div class="flex gap-2">
                        <input type="text" id="newNin" placeholder="NIN" class="input-field text-left" dir="ltr">
                        <input type="text" id="newName" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„" class="input-field">
                    </div>
                    <button onclick="addRegisteredEmployee()" class="btn-admin w-full mt-2">Ø¥Ø¶Ø§ÙØ© ÙƒÙ…Ø³Ø¬Ù„</button>
                </div>

                <div class="mb-4">
                    <h3 class="font-bold text-gray-700 mb-2">ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ†</h3>
                    <div class="max-h-60 overflow-y-auto border rounded-xl p-2">
                        <div id="registeredList" class="space-y-2"></div>
                    </div>
                </div>

                <div class="mt-4">
                    <label class="block text-gray-700 font-semibold mb-2">â° ØªØ¹Ø¯ÙŠÙ„ ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</label>
                    <input type="date" id="deadlineDate" class="input-field">
                    <button onclick="updateDeadline()" class="btn-outline-admin w-full mt-2">ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªØ§Ø±ÙŠØ®</button>
                </div>
            </div>
        </div>
    </div>

    <div class="max-w-4xl mx-auto">
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="inline-block bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-8 py-4 rounded-full shadow-2xl mb-4">
                <span class="text-3xl font-extrabold">ğŸ¥ EPSP Berriane</span>
            </div>
            <h1 class="text-4xl md:text-5xl font-extrabold text-white mb-2" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">
                Ù…Ù†ØµØ© Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„Ø§Øª
            </h1>
            <p class="text-xl text-white opacity-90">ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø©: <span class="font-bold">Ing. Ferhat H. EPSP Berriane</span></p>
        </div>

        <!-- Deadline Badge -->
        <div class="flex justify-center mb-6">
            <div class="deadline-badge flex items-center gap-2">
                <i class="fas fa-clock"></i>
                <span>Ø¢Ø®Ø± Ù…ÙˆØ¹Ø¯ Ù„Ù„ØªØ³Ø¬ÙŠÙ„: <span id="deadlineDisplay" class="font-extrabold">2025-03-30</span></span>
            </div>
        </div>

        <!-- Main Search Card -->
        <div class="glass-card p-8 mb-6">
            <div class="text-center mb-6">
                <span class="text-6xl mb-4 block">ğŸ”</span>
                <h2 class="text-3xl font-bold text-gray-800">Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„</h2>
                <p class="text-gray-600 mt-2">Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ¹Ø±ÙŠÙÙŠ Ø§Ù„ÙˆØ·Ù†ÙŠ (NIN) Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© ØªØ³Ø¬ÙŠÙ„Ùƒ</p>
            </div>

            <!-- Search Box -->
            <div class="flex flex-col md:flex-row gap-4">
                <div class="flex-grow">
                    <input type="text" id="searchNin" 
                           placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ¹Ø±ÙŠÙÙŠ Ø§Ù„ÙˆØ·Ù†ÙŠ (NIN)" 
                           class="search-input text-left" 
                           dir="ltr"
                           onkeypress="handleKeyPress(event)">
                </div>
                <button onclick="searchEmployee()" 
                        class="btn-admin text-lg px-8 py-4 flex items-center justify-center gap-2">
                    <i class="fas fa-search"></i>
                    <span>Ø¨Ø­Ø«</span>
                </button>
            </div>

            <!-- Progress Bar -->
            <div class="mt-8">
                <div class="flex justify-between text-sm text-gray-600 mb-2">
                    <span>Ù†Ø³Ø¨Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„</span>
                    <span id="progressPercentage">0%</span>
                </div>
                <div class="progress-bar">
                    <div id="progressFill" class="progress-fill" style="width: 0%;"></div>
                </div>
                <div class="flex justify-between mt-2 text-gray-600">
                    <span><span id="registeredCount">0</span> Ù…Ø³Ø¬Ù„</span>
                    <span><span id="totalCount">0</span> Ø¥Ø¬Ù…Ø§Ù„ÙŠ</span>
                </div>
            </div>
        </div>

        <!-- Result Message -->
        <div id="resultMessage" class="hidden glass-card p-8 text-center mb-6 transition-all duration-300">
            <div id="messageContent"></div>
        </div>

        <!-- Employee List (visible for admin in main view) -->
        <div class="glass-card p-6" id="employeeListContainer">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-gray-800">ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</h3>
                <div class="flex gap-2">
                    <select id="filterStatus" onchange="filterEmployees()" class="border rounded-xl p-2">
                        <option value="all">Ø§Ù„ÙƒÙ„</option>
                        <option value="registered">Ù…Ø³Ø¬Ù„</option>
                        <option value="pending">ØºÙŠØ± Ù…Ø³Ø¬Ù„</option>
                    </select>
                    <input type="text" id="searchFilter" placeholder="Ø¨Ø­Ø«..." class="border rounded-xl p-2" onkeyup="filterEmployees()">
                </div>
            </div>
            <div id="employeesTable" class="space-y-2 max-h-96 overflow-y-auto">
                <!-- Dynamic employee list will be inserted here -->
            </div>
        </div>
    </div>

    <script>
        // Database simulation
        let employees = [
            { nin: "295076543210", name: "Ø£Ø­Ù…Ø¯ Ø¨Ù† Ù…Ø­Ù…Ø¯", registered: true, dateRegistered: "2025-02-15" },
            { nin: "298012345678", name: "ÙØ§Ø·Ù…Ø© Ø§Ù„Ø²Ù‡Ø±Ø§Ø¡ Ø®ÙˆØ¬Ø©", registered: true, dateRegistered: "2025-02-20" },
            { nin: "299087654321", name: "Ø¹Ù„ÙŠ Ø¨Ù† ÙŠÙˆØ³Ù", registered: false },
            { nin: "297011122233", name: "Ø³Ø§Ø±Ø© Ù…Ø­Ù…ÙˆØ¯ÙŠ", registered: false },
            { nin: "296044455566", name: "Ù…Ø­Ù…Ø¯ Ø£Ù…ÙŠÙ† Ø³Ø¹ÙŠØ¯ÙŠ", registered: false },
            { nin: "294077788899", name: "Ù†ÙˆØ± Ø§Ù„Ù‡Ø¯Ù‰ Ø¨Ù† Ø¹Ù„ÙŠ", registered: false }
        ];

        let deadline = "2025-03-30";
        let isAdminLoggedIn = false;

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateStats();
            renderEmployeeList();
            document.getElementById('deadlineDisplay').textContent = deadline;
            document.getElementById('deadlineDate').value = deadline;
        });

        // Handle Enter key press
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                searchEmployee();
            }
        }

        // Search employee by NIN
        function searchEmployee() {
            const nin = document.getElementById('searchNin').value.trim();
            const resultDiv = document.getElementById('resultMessage');
            const messageContent = document.getElementById('messageContent');

            if (!nin) {
                showResult('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ¹Ø±ÙŠÙÙŠ Ø§Ù„ÙˆØ·Ù†ÙŠ', 'error');
                return;
            }

            const employee = employees.find(emp => emp.nin === nin);

            if (employee) {
                if (employee.registered) {
                    showResult(`
                        <div class="text-center">
                            <span class="text-6xl mb-4 block">âœ…</span>
                            <h3 class="text-2xl font-bold text-green-600 mb-2">ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­!</h3>
                            <p class="text-gray-700 mb-2">Ø§Ù„Ù…ÙˆØ¸Ù: ${employee.name}</p>
                            <p class="text-gray-600">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„: ${employee.dateRegistered || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</p>
                            <p class="text-sm text-gray-500 mt-4">Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ù‡Ù†ÙŠØ© Ù‚ÙŠØ¯ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©</p>
                        </div>
                    `, 'success');
                } else {
                    showResult(`
                        <div class="text-center">
                            <span class="text-6xl mb-4 block">âš ï¸</span>
                            <h3 class="text-2xl font-bold text-orange-600 mb-2">Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ø¹Ø¯</h3>
                            <p class="text-gray-700 mb-4">Ø§Ù„Ù…ÙˆØ¸Ù: ${employee.name}</p>
                            <div class="bg-orange-50 border-r-4 border-orange-500 p-4 rounded-lg">
                                <p class="text-orange-800 font-bold mb-2">ÙŠØ¬Ø¨ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ù‚Ø¨Ù„ ØªØ§Ø±ÙŠØ®: ${deadline}</p>
                                <p class="text-orange-700">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„ØªÙˆØ¬Ù‡ Ø¥Ù„Ù‰ Ù…Ù†ØµØ© Ø§Ù„ØªØ³Ø¬ÙŠÙ„:</p>
                                <a href="https://drhepspberriane.page.dev" target="_blank" 
                                   class="inline-block mt-2 bg-orange-500 text-white px-6 py-2 rounded-full hover:bg-orange-600 transition">
                                    drhepspberriane.page.dev
                                </a>
                            </div>
                        </div>
                    `, 'warning');
                }
            } else {
                showResult(`
                    <div class="text-center">
                        <span class="text-6xl mb-4 block">â“</span>
                        <h3 class="text-2xl font-bold text-red-600 mb-2">Ø§Ù„Ø±Ù‚Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</h3>
                        <p class="text-gray-700 mb-4">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…ÙˆØ¸Ù Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„ØªØ¹Ø±ÙŠÙÙŠ Ø§Ù„ÙˆØ·Ù†ÙŠ</p>
                        <div class="bg-red-50 border-r-4 border-red-500 p-4 rounded-lg">
                            <p class="text-red-800 mb-2">ÙŠØ¬Ø¨ Ø¹Ù„ÙŠÙƒ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø£ÙˆÙ„Ø§Ù‹ ÙÙŠ Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</p>
                            <a href="https://drhepspberriane.page.dev" target="_blank" 
                               class="inline-block mt-2 bg-red-500 text-white px-6 py-2 rounded-full hover:bg-red-600 transition">
                                Ø§Ù„Ø°Ù‡Ø§Ø¨ Ø¥Ù„Ù‰ Ù…Ù†ØµØ© Ø§Ù„ØªØ³Ø¬ÙŠÙ„
                            </a>
                        </div>
                    </div>
                `, 'error');
            }
        }

        function showResult(message, type) {
            const resultDiv = document.getElementById('resultMessage');
            const messageContent = document.getElementById('messageContent');
            
            messageContent.innerHTML = message;
            resultDiv.classList.remove('hidden');
            
            // Change colors based on type
            if (type === 'success') {
                resultDiv.style.borderRight = '8px solid #48bb78';
            } else if (type === 'warning') {
                resultDiv.style.borderRight = '8px solid #fbbf24';
            } else {
                resultDiv.style.borderRight = '8px solid #f87171';
            }
        }

        // Update statistics
        function updateStats() {
            const total = employees.length;
            const registered = employees.filter(emp => emp.registered).length;
            const percentage = total > 0 ? Math.round((registered / total) * 100) : 0;

            document.getElementById('registeredCount').textContent = registered;
            document.getElementById('totalCount').textContent = total;
            document.getElementById('progressPercentage').textContent = percentage + '%';
            document.getElementById('progressFill').style.width = percentage + '%';
            
            // Update admin stats if visible
            if (isAdminLoggedIn) {
                document.getElementById('totalEmployeesStat').textContent = total;
                document.getElementById('registeredStat').textContent = registered;
                document.getElementById('pendingStat').textContent = total - registered;
            }
        }

        // Render employee list
        function renderEmployeeList(filteredEmployees = null) {
            const list = filteredEmployees || employees;
            const container = document.getElementById('employeesTable');
            
            container.innerHTML = list.map(emp => `
                <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex justify-between items-center">
                    <div>
                        <span class="nin-badge">${emp.nin}</span>
                        <span class="mr-2 font-bold">${emp.name}</span>
                    </div>
                    <div>
                        ${emp.registered ? 
                            '<span class="status-registered"><i class="fas fa-check-circle ml-1"></i>Ù…Ø³Ø¬Ù„</span>' : 
                            '<span class="status-pending"><i class="fas fa-clock ml-1"></i>ØºÙŠØ± Ù…Ø³Ø¬Ù„</span>'
                        }
                    </div>
                </div>
            `).join('');
        }

        // Filter employees
        function filterEmployees() {
            const filterStatus = document.getElementById('filterStatus').value;
            const searchText = document.getElementById('searchFilter').value.toLowerCase();
            
            let filtered = employees;
            
            if (filterStatus !== 'all') {
                filtered = filtered.filter(emp => 
                    filterStatus === 'registered' ? emp.registered : !emp.registered
                );
            }
            
            if (searchText) {
                filtered = filtered.filter(emp => 
                    emp.name.includes(searchText) || emp.nin.includes(searchText)
                );
            }
            
            renderEmployeeList(filtered);
        }

        // Admin functions
        function toggleAdminModal() {
            const modal = document.getElementById('adminModal');
            modal.classList.toggle('active');
        }

        function adminLogin() {
            const password = document.getElementById('adminPassword').value;
            // Simple password check (in production, use proper authentication)
            if (password === 'admin123') {
                isAdminLoggedIn = true;
                document.getElementById('adminLoginSection').style.display = 'none';
                document.getElementById('adminPanelContent').style.display = 'block';
                updateStats();
                renderRegisteredList();
            } else {
                alert('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
            }
        }

        function renderRegisteredList() {
            const registered = employees.filter(emp => emp.registered);
            const listContainer = document.getElementById('registeredList');
            
            listContainer.innerHTML = registered.map(emp => `
                <div class="bg-gray-50 p-2 rounded-lg flex justify-between items-center">
                    <span class="font-mono">${emp.nin}</span>
                    <span>${emp.name}</span>
                </div>
            `).join('');
            
            if (registered.length === 0) {
                listContainer.innerHTML = '<p class="text-gray-500 text-center">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…ÙˆØ¸ÙÙŠÙ† Ù…Ø³Ø¬Ù„ÙŠÙ†</p>';
            }
        }

        function addRegisteredEmployee() {
            const nin = document.getElementById('newNin').value.trim();
            const name = document.getElementById('newName').value.trim();
            
            if (!nin || !name) {
                alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
                return;
            }
            
            // Check if employee already exists
            const existingIndex = employees.findIndex(emp => emp.nin === nin);
            
            if (existingIndex !== -1) {
                // Update existing
                employees[existingIndex].registered = true;
                employees[existingIndex].name = name;
                employees[existingIndex].dateRegistered = new Date().toISOString().split('T')[0];
            } else {
                // Add new
                employees.push({
                    nin: nin,
                    name: name,
                    registered: true,
                    dateRegistered: new Date().toISOString().split('T')[0]
                });
            }
            
            // Clear inputs
            document.getElementById('newNin').value = '';
            document.getElementById('newName').value = '';
            
            // Update everything
            updateStats();
            renderEmployeeList();
            renderRegisteredList();
            filterEmployees();
            
            alert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…ÙˆØ¸Ù ÙƒÙ…Ø³Ø¬Ù„ Ø¨Ù†Ø¬Ø§Ø­');
        }

        function updateDeadline() {
            const newDeadline = document.getElementById('deadlineDate').value;
            if (newDeadline) {
                deadline = newDeadline;
                document.getElementById('deadlineDisplay').textContent = deadline;
                alert('ØªÙ… ØªØ­Ø¯ÙŠØ« ØªØ§Ø±ÙŠØ® Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­');
            }
        }

        // Simulate getting registered employees from drhepspberriane.page.dev
        function syncFromMainPlatform() {
            // This would normally be an API call to drhepspberriane.page.dev
            // For demo, we'll simulate some new registrations
            const mockNewRegistrations = [
                { nin: "293011122233", name: "Ø®Ø¯ÙŠØ¬Ø© Ù…Ø±Ø²ÙˆÙ‚" },
                { nin: "292044455566", name: "Ø¹Ø¨Ø¯ Ø§Ù„Ø±Ø­Ù…Ù† Ø¨Ù† Ø³Ø¹ÙŠØ¯" }
            ];
            
            mockNewRegistrations.forEach(newEmp => {
                const existing = employees.find(emp => emp.nin === newEmp.nin);
                if (existing) {
                    existing.registered = true;
                    existing.name = newEmp.name;
                    existing.dateRegistered = new Date().toISOString().split('T')[0];
                } else {
                    employees.push({
                        ...newEmp,
                        registered: true,
                        dateRegistered: new Date().toISOString().split('T')[0]
                    });
                }
            });
            
            updateStats();
            renderEmployeeList();
            renderRegisteredList();
            alert('ØªÙ…Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© Ù…Ø¹ Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­');
        }

        // Export data
        function exportData() {
            const dataStr = JSON.stringify(employees, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `employees_${new Date().toISOString().split('T')[0]}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
        }
    </script>

    <!-- Admin action buttons (hidden until admin login) -->
    <div style="display: none;" id="adminActions">
        <button onclick="syncFromMainPlatform()" class="fixed bottom-2 right-2 bg-green-600 text-white p-3 rounded-full shadow-lg">
            <i class="fas fa-sync-alt"></i>
        </button>
        <button onclick="exportData()" class="fixed bottom-2 right-20 bg-blue-600 text-white p-3 rounded-full shadow-lg">
            <i class="fas fa-download"></i>
        </button>
    </div>

    <script>
        // Show admin actions when logged in
        const originalAdminLogin = adminLogin;
        adminLogin = function() {
            originalAdminLogin();
            if (isAdminLoggedIn) {
                document.getElementById('adminActions').style.display = 'block';
            }
        };
    </script>

    <!-- Footer -->
    <footer class="max-w-4xl mx-auto mt-12 text-center text-white opacity-80 text-sm">
        <p>ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø© <span class="font-bold">Ing. Ferhat H. EPSP Berriane</span> Â© 2025</p>
        <p class="mt-1">Ù…Ù†ØµØ© Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„Ø§Øª - Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©</p>
    </footer>
</body>
</html>
